# My Little Knight

간단한 2D 픽셀 스타일의 로그라이크 생존 게임입니다.

---
## 🎮 게임 플레이 & 특징

- **두 종류의 무기**: 플레이어는 **검**과 **활**을 사용하여 몬스터를 공격할 수 있습니다. 각 무기는 독특한 공격 방식과 애니메이션을 가지고 있습니다.
  - 활 공격은 기본 공격이며 최소 2초의 쿨타임에서 최대 1초까지 공격 쿨타임을 활 아이템 획득으로 줄일 수 있습니다.
  - 검 공격은 10초마다 사용이 가능하며 가까이에 붙은 몬스터들을 넉백 시키며 에너지 탄을 발사해 일직선 상으로 몬스터들에게 데미지를 줍니다. 

- **몬스터 강화**: 게임이 진행될수록 20초마다 몬스터의 능력치 (Normal 몬스터 스폰 수, 체력, 데미지, 이동속도) 가 강화되어 난이도가 점차 상승합니다.
  
- **특정한 상황에 등장하는 강화 몬스터**: 총 세 종류의 몬스터가 등장하며, 일반적으로 스폰되는 Normal 몬스터, Normal 몬스터 셋을 잡으면 스폰되는 Strong 몬스터, 특정 점수를 획득해야 스폰되는 Elite 몬스터.

- **생존에 도움을 주는 각종 아이템**:
  - 활과 검의 공격력 상승 아이템, 체력과 방어력을 회복하는 아이템, 이동속도 증가 아이템이 맵 내에서 랜덤 스폰됩니다.
  - 활 공격 아이템 획득 시 활 공격 쿨타임을 줄여주는 기능의 아이템이 존재합니다.
  - **아이템 스폰 시스템**: 5초마다 맵 내 무작위 위치에 아이템 하나가 스폰되고, 10초마다 무작위 위치에 아이템 랜덤 상자가 스폰됩니다.

- **맵 좌우에서 발사되는 적 발사체**:
  - 시작하면 랜덤한 위치에 스폰되 맵 좌<->우 에서 랜덤으로 생성되는 적 발사체.
  - 몬스터와 같이 20초마다 강화됩니다. 20초마다 데미지, 생성 속도, 발사 속도.

---


##  주요 문제 해결 과정 & 배운 점

<details>
<summary><b>몬스터 물리 충돌 및 플레이어 접근 버그 해결</b></summary>
<br/>

### 문제점

- 몬스터끼리 서로 겹치는 현상 발생
- 몬스터가 플레이어에게 다가가지 못하고, 보이지 않는 벽에 막히는 현상 발생
- 플레이어가 타일맵 밖으로 나가는 현상 발생

### 원인 분석

- **콜라이더 설정 오류**: 몬스터 프리팹에 콜라이더가 하나뿐이라 물리적인 충돌 처리가 부족했습니다. 또한, 플레이어의 자식 오브젝트인 `SwordPoint`의 콜라이더 속성이 잘못 설정되어 몬스터에게 접근하지 못하게 막는 '벽' 역할을 했습니다.
- **다중 역할 충돌**: 플레이어에게 콜라이더가 하나만 있어, 벽에 부딪히는 물리적 충돌과 몬스터와 겹치는 감지 역할을 동시에 수행할 수 없었습니다.

### 해결 과정

1.  **몬스터 프리팹 수정**:
    - `Box Collider 2D`를 추가하여 물리 충돌용과 감지용 콜라이더의 역할을 분리했습니다.
    - 기존 콜라이더는 몬스터 감지용(`Is Trigger` 켬), 새로 추가한 콜라이더는 몬스터 간 물리 충돌용(`Is Trigger` 끔)으로 설정했습니다.
      
2.  **플레이어 콜라이더 역할 분리**:
    - **물리 충돌용 콜라이더**(`Is Trigger` 끔)와 **몬스터 감지용 콜라이더**(`Is Trigger` 켬)를 따로 만들어 각 역할에 맞게 설정했습니다.
      
3.  **레이어 설정**:
    - `Layer Collision Matrix`를 활용하여 플레이어 레이어와 몬스터 레이어의 충돌을 비활성화해 의도하지 않은 물리적 상호작용을 방지했습니다.
      
4.  **`SwordPoint` 수정**:
    - `SwordPoint`의 `Is Trigger`를 `켜짐` 상태로 변경하여, 물리적인 충돌을 일으키지 않고 감지 영역 역할만 하도록 수정했습니다.

### 배운 점

- 유니티의 **콜라이더 역할 분리**와 **`Is Trigger` 속성의 정확한 활용법**을 이해했습니다.
- **Layer Collision Matrix**를 사용하여 복잡한 물리 상호작용을 체계적으로 관리하는 방법을 익혔습니다.
- 하나의 컴포넌트가 여러 역할을 동시에 수행할 때 발생할 수 있는 문제점을 파악하고, 최적화하는 방법을 배웠습니다.

</details>


<details>
<summary><b>몬스터의 플레이어 추적 및 공격 위치 문제</b></summary>
<br/>

### 문제점

- 몬스터가 플레이어를 추적하고 공격할 때, 플레이어의 몸통 중앙에 도착한 후 공격을 해야 했으나, 몬스터가 플레이어의 머리 위에서 공격하는 시각적 문제가 발생. 몬스터 크기가 클수록 더욱 위에서 멈추고 공격을 하던 문제 발생.

### 원인 분석

- **피벗(Pivot)과 콜라이더(Collider)의 불일치**: 다운받은 에셋의 크기를 조절하면서 몬스터와 플레이어의 피벗 위치와 콜라이더의 중심이 정확히 일치하지 않아 발생한 문제. 몬스터가 플레이어의 피벗(transform.position)을 추적하면서 몸통이 아닌 머리 위에서 멈추게 되었음.
- **거리 기반 공격 로직**: 몬스터의 공격이 시각적으로는 닿지 않았지만, 코드상으로는 이미 공격 범위 안에 들어와 있다고 판단하여 데미지를 입히는 논리적 오류가 있었음.

### 해결 과정

1.  **플레이어의 몸통 중앙 위치를 반환하는 함수 구현**:
   - `Player` 스크립트에 `GetCenterPosition()` 함수를 추가하고, 플레이어의 `BoxCollider2D`의 `bounds.center`를 반환하도록 구현.
     
2.  **몬스터 추적 목표 수정**:
   - `Enemy.cs` 스크립트에서 플레이어의 `transform.position` 대신 `playerScript.GetCenterPosition()`을 사용하여 몬스터의 추적 목표 위치를 플레이어의 몸통 중앙으로 변경.
     
3.  **수동 위치 보정**:
   - `Enemy.cs`에 `playerTargetOffsetY` 변수를 추가하여 몬스터의 Y축 위치를 수동으로 인스펙터에서 조절할 수 있게 함.
   - `FixedUpdate` 함수에서(물리 계산 로직이 Update보다 더욱 효과적) `playerCenterPosition.y += playerTargetOffsetY;` 코드를 통해 몬스터가 플레이어의 몸통 중앙보다 약간 아래 지점을 목표로 삼도록 수정.

### 배운 점

- **피벗(Pivot)과 콜라이더(Collider)**의 정확한 역할을 이해했습니다. 시각적인 모습뿐만 아니라, 물리적 충돌 영역과 오브젝트의 기준점을 따로 관리해야 함을 배웠습니다.
- **`bounds.center`**와 같은 API를 활용하여 오브젝트의 특정 영역에 대한 정보를 가져오는 방법을 익혔습니다.
- 문제의 근본적인 원인을 파악하고, 그에 맞는 **유연한 논리적인 해결책**을 코드로 구현하는 능력을 키웠습니다.

</details>


<details>
<summary><b>몬스터의 플레이어 추적 및 공격 위치 문제</b></summary>
<br/>
  
##  웅잉

